{% extends 'base.html' %}
{% block content %}

<section class="hero-wrapper">
  <div class="hero-card">

    <!-- LEFT SIDE -->
    <div class="hero-left">
      <h1 class="hero-title">ğŸ©º Predict Blood Group</h1>
      <p class="hero-subtitle">
        Upload a fingerprint image and let AI predict the blood group.
      </p>

      <form method="POST" enctype="multipart/form-data"
            onsubmit="showLoaderText('loader','ğŸ§  AI is analyzing fingerprint...')">

        <label class="upload-box">
          <input type="file" name="image" accept="image/*"
                 onchange="previewLocal(event)" hidden required>
          <span id="fileText">ğŸ“ Choose Fingerprint Image</span>
        </label>

        <button class="predict-btn" type="submit">
          ğŸ” Predict Blood Group
        </button>
      </form>

      <div id="loader" class="ai-loader"></div>

      {% if prediction %}
      <div class="result-box">
        ğŸ§¬ Predicted Blood Group: <span>{{ prediction }}</span>
      </div>
      {% endif %}

      <p class="tip-text">
        Tip: Use clear fingerprint images for better predictions.
      </p>
    </div>

    <!-- RIGHT SIDE -->
    <div class="hero-right">
      {% if image_file %}
      <img id="preview"
           src="{{ url_for('static', filename='uploads/' + image_file) }}"
           class="preview-img">
      {% else %}
      <img id="preview" class="preview-img" style="display:none;">
      {% endif %}
    </div>

  </div>
</section>

<script>
function previewLocal(event){
  const img = document.getElementById('preview');
  const text = document.getElementById('fileText');
  img.src = URL.createObjectURL(event.target.files[0]);
  img.style.display = 'block';
  text.innerText = `ğŸ“„ ${event.target.files[0].name}`;
}
</script>

{% endblock %}
